(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b4fb4ba"],{"0508":function(e,t,r){"use strict";r.r(t);r("b0c0");var n=r("7a23"),o=Object(n["createTextVNode"])("保存"),c=Object(n["createTextVNode"])("取消");function u(e,t,r,u,i,d){var a=Object(n["resolveComponent"])("el-tree"),l=Object(n["resolveComponent"])("m-panel"),s=Object(n["resolveComponent"])("el-input"),m=Object(n["resolveComponent"])("m-form-item"),f=Object(n["resolveComponent"])("el-button"),p=Object(n["resolveComponent"])("m-form"),b=Object(n["resolveComponent"])("m-panel-group"),h=Object(n["resolveComponent"])("m-layout-page");return Object(n["openBlock"])(),Object(n["createBlock"])(h,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(b,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{panelProps:i.asideProps,width:"200px",style:{"margin-right":"0"},title:"菜单树"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(a,{ref:"menuTree",class:"menu-tree",data:e.menuTree,props:{children:"children",label:"name"},accordion:!0,"highlight-current":!0,"expand-on-click-node":!0,"node-key":"menuId",onNodeClick:t[0]||(t[0]=function(e,t){d.proxyOperation(d.clickTree,e,t)})},null,8,["data"])]})),_:1},8,["panelProps"]),Object(n["createVNode"])(l,{panelProps:i.mainProps,class:"panel-right",title:"菜单详情"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(p,{formProps:i.formProps,ref:"form"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(m,{label:"菜单名称",prop:"name"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{modelValue:i.formProps.model.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.formProps.model.name=e})},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(m,{label:"菜单编码",prop:"code"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{modelValue:i.formProps.model.code,"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.formProps.model.code=e})},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(m,{label:"访问地址",prop:"url"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{modelValue:i.formProps.model.url,"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.formProps.model.url=e})},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(m,{label:"顺序",prop:"orderIndex"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{modelValue:i.formProps.model.orderIndex,"onUpdate:modelValue":t[4]||(t[4]=function(e){return i.formProps.model.orderIndex=e})},null,8,["modelValue"])]})),_:1}),i.formProps.isReadonly?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(m,{key:0},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(f,{type:"primary",onClick:d.save},{default:Object(n["withCtx"])((function(){return[o]})),_:1},8,["onClick"]),Object(n["createVNode"])(f,{onClick:d.cancelSave},{default:Object(n["withCtx"])((function(){return[c]})),_:1},8,["onClick"])]})),_:1}))]})),_:1},8,["formProps"])]})),_:1},8,["panelProps"])]})),_:1})]})),_:1})}var i=r("2909"),d=r("1da1"),a=r("5530"),l=(r("159b"),r("b64b"),r("96cf"),r("5502")),s=r("8c37"),m={name:"menuManagement",computed:Object(a["a"])(Object(a["a"])({},Object(l["b"])("managementAccess",["menuTree"])),Object(l["c"])("managementAccess",["accessList"])),data:function(){var e=this;return{editModel:"",selNode:null,asideProps:{toolbar:[function(){return{text:"新增",on:{onClick:function(){return e.proxyOperation(e.addCurrent)}},key:"SYS_MENU_ADD"}},function(){return{text:"删除",on:{onClick:function(){return e.proxyOperation(e.deleteCurrent)}},key:"SYS_MENU_DELETE"}}]},mainProps:{toolbar:[function(){return{text:"编辑",on:{onClick:function(){return e.proxyOperation(e.modifyCurrent)}},props:{hidden:!!e.editModel||!e.selNode},key:"SYS_MENU_EDIT"}}]},formProps:{isReadonly:!0,model:this.FormInit(),rules:{name:[{required:!0,message:"不能为空",trigger:"blur"}],code:[{required:!0,message:"不能为空",trigger:"blur"}],url:[{required:!0,message:"不能为空",trigger:"blur"}],orderIndex:[{required:!0,message:"不能为空",trigger:"blur"}]}}}},methods:{FormInit:function(){return{menuId:"",name:"",code:"",url:"",orderIndex:""}},proxyOperation:function(e){var t=arguments,r=this;return Object(d["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(Array.prototype.shift.apply(t),!r.editModel){n.next=7;break}return n.next=4,r.$confirm("该操作将不保存已填写的表单数据","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"});case 4:r.$refs.menuTree.remove(r.formProps.model.menuId),r.editModel="",r.formProps.model=r.FormInit();case 7:e.apply(void 0,Object(i["a"])(t));case 8:case"end":return n.stop()}}),n)})))()},clickTree:function(e,t){var r=this;this.isNewNode(e)||(this.selNode=t,Object.keys(this.formProps.model).forEach((function(t){r.formProps.model[t]=e[t]})),this.formProps.model.menuId=t.data.menuId)},appendNode:function(e){var t=this,r=this.$refs.menuTree.getCurrentNode(),n=this.$refs.menuTree.getNode(r),o=function(){n.insertChild({data:e,parent:n}),t.$nextTick((function(){t.$refs.menuTree.setCurrentKey(e.menuId)}))};if(n)n.childNodes.length?o():n.expand((function(){o()}));else{var c=this.$refs.menuTree.getNode(this.menuTree[this.menuTree.length-1]);this.$refs.menuTree.insertAfter(e,c),this.$nextTick((function(){t.$refs.menuTree.setCurrentKey(e.menuId)}))}},isNewNode:function(e){return e.id>15e11},addCurrent:function(){var e=this.$refs.menuTree.getCurrentNode();this.editModel="add",this.formProps.model=this.FormInit(),this.formProps.model.menuId=(new Date).getTime(),this.formProps.model.parentId=e?e.menuId:"",this.formProps.model.name="新建菜单",this.appendNode(this.formProps.model)},modifyCurrent:function(){this.editModel="modify"},deleteCurrent:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["a"])("deleteMenu",{menuId:e.formProps.model.menuId});case 2:return t.next=4,Object(s["a"])("getMenuList");case 4:r=t.sent,e.$store.commit("managementAccess/ACCESS_LIST",r),e.selNode=null,e.$refs.menuTree.setCurrentKey(null);case 8:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Object(a["a"])({},e.formProps.model),"add"===e.editModel&&delete r.menuId,t.next=4,Object(s["a"])("".concat(e.editModel,"Menu"),r);case 4:return n=t.sent,t.next=7,Object(s["a"])("getMenuList");case 7:o=t.sent,e.$store.commit("managementAccess/ACCESS_LIST",o),"add"===e.editModel&&(e.formProps.model.menuId=n),e.$nextTick((function(){e.$refs.menuTree.setCurrentKey(e.formProps.model.menuId)})),e.editModel="";case 12:case"end":return t.stop()}}),t)})))()},cancelSave:function(){this.selNode=null,this.$refs.menuTree.setCurrentKey(null),"add"===this.editModel&&this.$refs.menuTree.remove(this.formProps.model.menuId),this.editModel="",this.formProps.model=this.FormInit()}},watch:{editModel:function(e){this.formProps.isReadonly=!e}}},f=(r("5f37"),r("d959")),p=r.n(f);const b=p()(m,[["render",u]]);t["default"]=b},"5f37":function(e,t,r){"use strict";r("c0e6")},c0e6:function(e,t,r){}}]);
//# sourceMappingURL=chunk-1b4fb4ba.9968df58.js.map